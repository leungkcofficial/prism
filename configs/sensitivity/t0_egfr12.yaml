# PRISM Sensitivity Analysis: t₀ threshold = eGFR ≤12
# Tests impact of different index date definition

project:
  name: prism_sensitivity
  mode: s_learner
  model_type: deepsurv
  experiment_name: prism_sensitivity_t0_egfr12

cohort:
  egfr_screen_lt15_min_days: 90
  egfr_screen_lt15_max_days: 365
  t0_threshold: 12.0  # CHANGED: eGFR ≤12 instead of ≤10
  outpatient_only: true
  require_confirmatory_egfr: false
  early_window_days: 90
  study_end_date: "2023-12-31"
  max_followup_days: 1825

features:
  lab_lookback_days: 90
  cci_lookback_years: 5
  derive_uacr_from_upcr: true
  lab_features:
    - creatinine
    - hemoglobin
    - albumin
    - a1c
    - phosphate
    - calcium
    - bicarbonate
    - uacr

splitting:
  temporal_test_start: "2022-01-01"
  spatial_test_frac: 0.10
  random_seed: 42

imputation:
  method: mice
  max_iter: 10
  estimator: extratrees
  random_seed: 42

preprocessing:
  log_transform_features:
    - creatinine
    - phosphate
    - uacr
  scaling_method: minmax
  binarize_cci: true

model:
  architecture: mlp
  hidden_layers: [128, 64, 32]
  dropout: 0.3
  learning_rate: 0.001
  epochs: 100
  batch_size: 256
  device: cuda

mlflow:
  tracking_uri: "mlruns"
  experiment_name: prism_sensitivity_t0_egfr12

output:
  model_dir: "models/sensitivity/t0_egfr12"
  results_dir: "results/sensitivity/t0_egfr12"
